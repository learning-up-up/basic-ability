# Linux入门
<details>
    <sumarry> 目录</sumarry>

- [Linux入门](#linux入门)
  - [Linux 基础命令](#linux-基础命令)
    - [目录结构](#目录结构)
    - [命令与命令行](#命令与命令行)
    - [ls命令](#ls命令)
      - [工作目录与home](#工作目录与home)
      - [-options](#-options)
    - [cd命令](#cd命令)
    - [pwd命令](#pwd命令)
    - [相对路径与绝对路径](#相对路径与绝对路径)
    - [mkdir创建目录命令](#mkdir创建目录命令)
    - [touch,cat,more](#touchcatmore)
      - [touch](#touch)
      - [cat和more](#cat和more)
    - [cp,mv,rm](#cpmvrm)
      - [cp](#cp)
      - [mv](#mv)
      - [rm(remove)](#rmremove)
        - [通配符](#通配符)
    - [whichi,find](#whichifind)
      - [which](#which)
      - [find](#find)
    - [grep，wc，管道符](#grepwc管道符)
      - [grep](#grep)
      - [wc](#wc)
      - [管道符 |](#管道符-)
    - [echo，反引号，重定向符，tail](#echo反引号重定向符tail)
      - [echo](#echo)
      - [反引号\`](#反引号)
      - [重定向符\>,\>\>](#重定向符)
      - [tail](#tail)
    - [vi/vim编辑器](#vivim编辑器)
      - [命令模式](#命令模式)
      - [底线命令模式](#底线命令模式)
  - [Linux用户与权限](#linux用户与权限)
    - [root](#root)
      - [root用户](#root用户)
      - [su,exit命令](#suexit命令)
      - [sudo](#sudo)
    - [用户和用户组管理](#用户和用户组管理)
      - [用户和用户组](#用户和用户组)
      - [管理命令（root权限）](#管理命令root权限)
    - [权限信息](#权限信息)
    - [chmod，chown](#chmodchown)
      - [chmod](#chmod)
      - [chown](#chown)
  - [软件管理](#软件管理)
    - [应用商店](#应用商店)
    - [systemctl](#systemctl)
  - [软连接](#软连接)
  - [日期，时区](#日期时区)
  - [ip地址](#ip地址)
    - [IP](#ip)
    - [主机名](#主机名)
    - [域名解析](#域名解析)
  - [网络传输](#网络传输)
    - [ping](#ping)
    - [wget非交互式的文件下载命令](#wget非交互式的文件下载命令)
    - [curl发送网络请求](#curl发送网络请求)
    - [端口](#端口)
  - [进程管理](#进程管理)
    - [查看进程信息](#查看进程信息)
    - [关闭进程](#关闭进程)
  - [管理主机状态](#管理主机状态)
  - [环境变量](#环境变量)
    - [PATH](#path)
    - [自行设置环境变量](#自行设置环境变量)

</details>

## Linux 基础命令

### 目录结构

采用树结构来存储文件，所有的文件都基于根目录（用一个/表示）

路径层级用"/"来表示，eg:```/usr/local/hello.txt```

### 命令与命令行

每一个命令就是一个Linux程序

命令格式：```command [-options] [parameter]```

* command：命令本身
* -options：可选的行为细节
* parameter：可选的参数

### ls命令

作用：列出目录下的内容（类似于打开文件夹的操作）

```ls [-a -l -h] [Linux路径]```

无参数情况下，会直接列出当前工作目录下的所有文件

#### 工作目录与home

Linux在使用时必须要打开一个工作目录，打开终端是的默认目录就是HOME目录。

每个Linux用户的个人账户目录，路径在```/home/username```

#### -options

* -a:展示所有的包括隐藏的目录（对于Linux系统，.开头的文件会隐藏）
* -l:以列表的形式显示详细信息
* -h:通过易于阅读的方式列出文件的大小信息。要与l混合使用

混合使用：-l-a 或 -la

### cd命令

作用：切换工作目录

```cd [Linux路径]```

不给路径时，就是回到HOME目录

### pwd命令

查看当前的工作目录

```pwd //无选项无参数```

### 相对路径与绝对路径

使用cd命令时，绝对路径是以根目录为起点，描述以/开头，而相对路径则是以当前工作目录为起点。

特殊路径符
* .:表示当前目录下
* ..:表示切换到上一级目录
* ~:表示HOME目录

eg：回到上上一个目录```cd ../..```

### mkdir创建目录命令

```mkdir [-p] [Linux路径]```在指定路径（相对于绝对均可）下创建文件夹

-p选项表示可以自动创建路径中不存在的父目录

mkdir操作必须在HOME目录内，否则没有权限

### touch,cat,more

#### touch

```touch [Linux路径]```创建一个文件

区分文件夹和文件：d代表文件叫，-代表文件

#### cat和more

```cat [Linux路径]```作用：查看文件内容，直接显示所有内容

```more [Linux路径]```对于文件内容过多的情况，支持通过spaces翻页，通过Q来退出

### cp,mv,rm

#### cp

```cp [-r] 参数1 参数2```用于复制文件和文件夹

* -r：复制文件夹的选项
* 参数1：被复制的内容路径
* 参数2：要去的路径（可以直接重命名）

#### mv

```mv 参数1 参数2```移动文件或文件夹。参数1表示被移动的，参数2表示要去的位置，如果目标不存在，则会进行改名。

#### rm(remove)

```rm [-r -f] 参数1 参数2 ···```用于删除文件和文件夹，其中每个参数都表示要删除的目标路径

* -r：用于删除文件夹
* -f：管理员用户用于强制删除

##### 通配符

*表示通配符，用来匹配任意内容（包含空）。eg：

* test*：以test开头的内容
* *test：以test结尾
* *test\*：包含test

rm命令就可以使用通配符来辅助操作

### whichi,find

#### which

```which 要查找的命令```，可以找到我们使用的命令的程序文件

#### find

```find 起始路径 -name "文件名"```，从其实路径开始查找所有对应文件的文件。eg：```find /home/sakanaction -name "*test\*```查找HOME目录下名称中含有test的文件

同样支持通配符进行模糊匹配

```find 起始路径 -size +|-n[kMG]```按文件大小进行搜索。+/-表示大于或小于，kMG表示单位kb、MB，GB。

### grep，wc，管道符

#### grep

```grep [-n] 关键字 文件路径```可以从文件中通过关键字来过滤出文件行。其中-n表示是否在结果中显示匹配的行号。

#### wc

```wc [-c -m -l -w] 文件路径```统计文件的行数、单词数量等

* -c：字节数
* -m：字符数
* -l：行数
* -w：词数

#### 管道符 |

以管道符左侧的命令作为管道符右侧命令的输入。eg：```cat test.txt | grep keyword | wc -l```统计test.txt文件中有keyword关键字的行数

### echo，反引号，重定向符，tail

#### echo

```echo "···"```直接在命令行输出内容

#### 反引号`

`包围的内容会被看做命令

#### 重定向符>,>>

\>将左侧命令的内容覆盖写入右侧的文件，\>>将左侧的结果追加写入右侧文件

#### tail

```tail [-f -num] 文件路径```表示查看文件的尾部num行，-f表示持续追踪

### vi/vim编辑器

* 命令模式：所有的输入被视为命令，可以使用各种快捷指令
* 输入模式：所有的输入都是文本编辑
* 底线命令模式：进行保存、退出

#### 命令模式
* i:从当前光标后进入输入模式

#### 底线命令模式
* w：保存
* q：退出
* wq：保存并退出
* set nu：显示行号

![三种模式的转换](.\images\vim模式转换.png)

## Linux用户与权限

### root

#### root用户

root拥有系统最大的操作权限，而普通用户权限集中在HOME目录中

#### su,exit命令

```su [-] [name]```切换用户，-表示加载环境变量

```exit```表示退回到上一个用户

#### sudo

```sudo  其他命令```为普通的命令授权，临时可以以root身份运行。相对su更加安全

使用sudo命令需要通过root为当前用户授权，第一次进入root用户，我们可以使用```wsl -u root```直接使用管理员权限进入root用户，再执行```visudo```进入文件，在文件最后添加```name ALL=(ALL)  NOPASSWD:ALL```即可授予权限

也可以使用```sudo su - root```直接切换用户
慎重！

### 用户和用户组管理

#### 用户和用户组

linux可以配置多个用户、配置多个用户组、用户加入不同的用户组

而Linux关于权限管控可以针对用户也可以针对用户组

#### 管理命令（root权限）

```groupadd groupname```创建用户组，```groupdel groupname```删除用户组

```useradd [-g -d] username```

* -g：指定用户所在的组，若不填，则会自动创建一个同名组加入
* -d：指定用户的HOME路径，如不填，默认在```/home/username```

```userdel [-r] username```-r表示删除HOME目录

```id[username]```查看用户所在组

```usermod -aG groupname username```将指定用户加入指定用户组

```getent passwd```查看有哪些用户，```getent group```

### 权限信息

![权限细节](.\images\权限细节.png)

* r：读权限
* w：写/修改
* x：执行权限，是否可以cd

### chmod，chown

#### chmod

```chmod [-R] 权限 文件或文件夹```-R表示对文件夹的所有文件，必须是所属用户或root用户才内修改对应权限

可以通过三位数字来快捷修改对应的权限

#### chown

```chown [-R] [username] [:] [group] file```更改文件所属的用户与用户组，需要root权限

## 软件管理

### 应用商店

软件安装中，不同的系统会使用不同的包管理器。CentOS使用.rpm文件，而Ubuntu使用.deb文件

```yum [-y] [install | remove | search] 软件名称```其中-y表示自动安装，无需手动确认，需要root权限

在Ubuntu中，对应的是使用另一个命令```apt```

### systemctl

```systemctl [status | enable | start | stop | disable] app```可以管理相关软件的使用，包括开机自启和关闭

部分软件在安装之后会直接集成到systemctl中

## 软连接

```ln -s 参数1（被链接的地址） 参数2（连接去的地址）```，软连接相当于一个快捷方式，在文件夹中我们使用```ls```命令会看到一个箭头指向它的源文件

l类型就代表了软连接

## 日期，时区 

```date [-d] [+格式化字符串]```，-d表示进行时间的计算，格式化字符串用于固定格式时期的显示

* %Y 年
* %y 年的后两位
* %m 月份
* %d 日
* %H 小时
* %M 分钟
* %S 秒
* %s 从1970-01-01（unix元年）到现在的秒数 

如：```date -d "+1 year" +"%Y-%m-%d"```（现在是2025年11月3日），该命令就会显示2026-11-3

我们可以使用ntp软件来进行自动矫正时区时间

## ip地址

### IP

通过```ifconfig```来查看我们的IP地址

通常127.0.0.1都是代表本机，0.0.0.0也会代表本机

IP地址是每一台电脑用于对外联络的地址，每一位数字都是8位的

### 主机名

```hostname```查看主机名

可以使用```hostnamectl set-hostname name```来修改我们的主机名

### 域名解析

通常我们将```www.baidu.com```这类网址也称作域名，通过一串字符来代替IP地址。

对于我们的操作系统，当我们输入域名是，我们会首先查看本机记录，再联网查询dns服务器，判断是否可以打开网站

## 网络传输

### ping 

```ping [-c num] ip/主机名```查看指定网络服务器是否可联通

options表示检查的次数，否则将无限次检查

### wget非交互式的文件下载命令

```wget [-b] url```url表示下载链接，-b表示后台下载，会将日志写入工作文件wget-log文件


### curl发送网络请求

```curl -O url```-O用于下载文件

例如```curl cip.cc```表示发起请求，用于获得主机的公网IP地址

### 端口

计算机之间可以通过IP地址来互相访问，但是IP地址不能反映计算机中的某一个程序。而端口就是用来锁定对应IP地址的具体程序。

Linux系统可以支持65535个端口。
* 公认端口：1~1023，是系统内置与知名程序的端口
* 注册端口：1024~49151，可以随意使用
* 动态端口：通常用来程序对外网络连接时的临时端口

使用nmap命令来查看指定IP的端口的暴露情况，

也可以使用netstat命令来查看指定端口的占用情况```netstat -anp | grep 端口号```

## 进程管理

相当于使用任务管理器来管理运行程序

### 查看进程信息

```ps [-e -f]```-ef表示全部信息。可以配合管道符来查找特定命令的运行情况

### 关闭进程

```kill [-9] 进程id```-9表示强制关闭

## 管理主机状态

使用top命令来查看主机的使用情况

* PID：进程id
* PR：进程的优先级，越小优先级越高

top命令支持了大量的options

## 环境变量

环境变量就是辅助系统运行的关键性信息。可以通过env来查看系统中的环境变量。Linux中环境变量以keyvalue的形式来表示。

### PATH

我们的各种命令实际上是一个个可执行文件，但是系统是如何在不同目录下找到对应的文件呢？就是通过PATH来进行的。PATH中有一系列以“：”隔开的路径，系统就根据这个路径依次去搜索文件

可以通过$来取到环境变量的键值

### 自行设置环境变量

临时设置：```export 变量名=变量值```

永久生效：

* 针对当前用户生效配置在```~/.bashrc```中
* 针对所有用户生效配置在```/etc/profile
* 通过语法:```source配置文件```立刻生效
